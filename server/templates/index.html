<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EZRA</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header>
    <!-- Load snarkjs from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/snarkjs@0.7.1/build/snarkjs.min.js"></script>
    <!-- Load jszip from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

    <!-- Load actual JS logic -->
    <script src="{{ url_for('static', filename='modal_logic.js') }}"></script>
    <script src="{{ url_for('static', filename='file_logic.js') }}"></script>
    <script src="{{ url_for('static', filename='zkp_logic.js') }}"></script>
    <h1>EZRA</h1>
    <nav>
      <a href="/about">About</a>
      <a href="/terms">Terms of Service</a>
      <a href="/privacy">Privacy Policy</a>
    </nav>
  </header>

  <main>
    <h2>Ephemeral Zero-Knowledge Relay Archive</h2>

    <form id="uploadForm">
      <label for="fileUpload" id="dropZone">
        <input type="file" name="file" id="fileUpload" hidden multiple>
        Drag and drop a file here or click to upload
      </label>
      <button type="submit">Confirm</button>
      <p id="uploadError" class="text-sm text-red-600 hidden" style="margin-top: 0.5rem;"></p>
    </form>

    <div id="uploadOptionsModal" class="modal hidden">
      <div class="modal-content">
        <h3>Upload Settings</h3>
    
        <label>
          Erase after first download:
          <input type="checkbox" id="deleteAfterDownload" checked>
        </label>
        <br><br>
    
        <label for="expiryHours">Expire after:</label>
        <select id="expiryHours">
          <option value="1">1 hour</option>
          <option value="6">6 hours</option>
          <option value="12">12 hours</option>
          <option value="24" selected>24 hours</option>
          <option value="48">48 hours</option>
          <option value="72">72 hours</option>
        </select>
    
        <div style="margin-top: 1rem;">
          <button id="confirmUpload">Submit</button>
          <button id="cancelUpload" class="secondary">Cancel</button>
        </div>
    
        <!-- Stage message -->
        <p id="uploadStage" style="margin-top: 1rem; font-weight: bold; color: #444;">
          <!-- dynamically set from JS -->
        </p>
    
        <!-- Progress bar -->
        <progress id="uploadProgress" value="0" max="100" style="width: 100%; margin-top: 0.5rem;"></progress>
      </div>
    </div>
    

    <section id="downloadSection" class="info-card">
      <h3>Retrieve a File</h3>
      <form id="downloadForm">
        <label for="downloadSecret">Enter your secret:</label>
        <input type="text" id="downloadSecret" name="secret" required placeholder="Paste your secret..." />
        <button type="submit" style="margin-top: 1rem;">Download</button>
      </form>
      <progress id="downloadProgress" value="0" max="100" style="width: 100%; margin-top: 1rem;" class="hidden"></progress>
      <p id="downloadStatus" class="text-sm text-red-600 mt-2 hidden"></p>
    </section>


    <div id="secretModal" class="modal hidden">
      <div class="modal-content">
        <h3>Secret Key</h3>
        <p id="secretMessage"></p>
        <br>
        <br>
        <button id="copySecret">Copy to Clipboard</button>
        <button id="closeSecretModal" disabled>Close (5)</button>
      </div>
    </div>

    <div id="loadingModal" class="modal hidden">
      <div class="modal-content" style="text-align: center;">
        <div class="spinner" style="margin-bottom: 1rem;"></div>
        <p>Encrypting and uploading your files...</p>
      </div>
    </div>


    <section id="ezraSummary" class="info-card">
      <h3>What is EZRA?</h3>
      <p><strong>EZRA</strong> (Ephemeral Zero-Knowledge Relay Archive) is a secure file dropbox for those who canâ€™t afford to be tracked.</p>
    
      <div class="info-grid">
        <div><strong>Zero-Knowledge Proof Access:</strong> No usernames, no passwords, no identity storage.</div>
        <div><strong>AES-256-GCM Encrypted Files:</strong> Only you and the recipient can decrypt.</div>
        <div><strong>Ephemeral by Default:</strong> Files auto-delete. No logs. No IPs. No metadata.</div>
      </div>
    
      <p class="tagline"><em>Open Source. Verifiable. Trustless by Design.</em></p>
    
      <p><strong>Built for:</strong></p>
      <div class="audience-grid">
        <div>Journalists and whistleblowers</div>
        <div>Incident response and security teams</div>
        <div>Privacy advocates and NGOs</div>
        <div>Anyone who needs plausible deniability and zero data residue</div>
      </div>

      <p class="deploy-tagline"><strong>Deploy in 5 minutes. No accounts. No trust required.</strong></p>
    </section>

    
    <p>Anonymous. Secure. Temporary.</p>
    
    

  </main>


  
</body>
</html>
